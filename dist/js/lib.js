define(["jquery","carouFredSel","lazyload","easing","sly"],function(s){return{use:function(){this.clipText(),this.thumbnail(),this.scrollMenu(),this.scroll(),this.banner()},clipText:function(){s(".u-clipText").each(function(){var i=s(this).text();s(this).empty().append('<div class="clipTextNode"></div>');var e=s(this).children(".clipTextNode");e.text(i);var n=s(this).height(),t=e.height();if(n<t){var a=i.length;e.text(i.substr(0,a*(n/t)-3)+"...")}})},thumbnail:function(){s(".u-pic").each(function(){var i=s(this).children("img"),e=i.attr("src");i.css("display","none"),s(this).append('<div class="picNode" style="width:100%;height:100%;background:url('+e+') no-repeat center center;background-size:cover;"></div>')}),s(".u-lazyloadPic").each(function(){var e=s(this),n=s(this).find("img");n.lazyload({placeholder:"images/icon/loading.gif",skip_invisible:!1,effect:"fadeIn",load:function(){var i=n.attr("data-original");n.css("display","none"),e.append('<div class="picNode" style="width:100%;height:100%;background:url('+i+') no-repeat center center;background-size:cover;"></div>')}})})},scrollMenu:function(){s(".u-scrollMenu").each(function(){var i=s(this).find(".prev"),e=s(this).find(".next");s(this).find("ul").carouFredSel({direction:"left",width:"100%",prev:i,next:e,auto:{play:!0,pauseOnHover:!0,timeoutDuration:3e3},scroll:1})})},scroll:function(){s(".u-scroll").each(function(){var i=s(this);s(this).wrapInner("<div class='frame-detail'><div></div></div>"),s(this).prepend("<div class='scrollbar'><div class='handle'><div class='mousearea'></div></div></div>"),s(this).find(".frame-detail").sly({speed:300,easing:"easeOutExpo",scrollBar:i.find(".scrollbar"),scrollBy:30,dragHandle:1,dynamicHandle:1,clickBar:1})})},banner:function(){s(".u-banner").each(function(){s(this).find(".roll ul").carouFredSel({responsive:!0,direction:"left",width:"100%",auto:{play:!0,pauseOnHover:!0,timeoutDuration:4500},scroll:{duration:450,fx:"uncover-fade"},items:{visible:{max:1}},pagination:{container:".u-banner .pag"}})})},mouseScroll:function(i,e){var n=s(window),t=s(document),a=n.height(),r=t.height()-a,l=i.offset().top,o=l-.7*a;if(o=r<o?r:o,l<=a)e();else{var c=!0;n.scroll(function(){1==c&&n.scrollTop()>=o&&(e(),c=!1)})}},randomNum:function(i,e){var n=e-i,t=Math.random();return i+Math.round(t*n)}}});